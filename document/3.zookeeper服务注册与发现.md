# zookeeper服务注册与发现

---

#### zookeeper

Zookeeper在分布式环境中应用十分广泛，其优秀的功能很多，如分布式环境中全局命名服务注册中心，全局分布式锁等。

参考：https://www.cnblogs.com/xinyonghu/p/11031729.html

几个问题：

1. zk的数据是如何组织的？znode节点
2. zk的watcher机制？

```shell
# 解压源码
unzip zookeeper-3.4.10.tar.gz
# 配置文件
cd conf
mv zoo_sample.cfg zoo.cfg
# 启动zookeeper
cd bin
./zkServer.sh start
# 通过 netstat 查看 zkServer 的端口
# 在bin目录启动zkClient.sh链接zkServer
# 熟悉zookeeper组织节点
```

zookeeper已经提供了原生的C/C++和JavaAPI开发的接口，需要通过源码编译生成：

```shell
# zk的原生开发api
# 进入解压后的src/c目录下
 sudo ./configure
 sudo make
 sudo make install
```

主要关注zookeeper如何管理节点：创建节点、获取节点，删除节点以及watcher机制的API编程。

znode节点存储格式：

![image-20250805141050032](assets/image-20250805141050032.png)





















